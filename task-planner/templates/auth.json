{
  "templateName": "auth",
  "description": "通用认证系统模板（登录/注册 + 会话管理 + 权限控制）",
  "keywords": ["登录", "注册", "认证", "权限", "auth", "login", "signup", "session"],
  "variables": {
    "{{auth_method}}": "认证方式（如 session-based, JWT, OAuth）",
    "{{route_path}}": "认证 API 路由路径（如 /api/auth）"
  },
  "tasks": [
    {
      "id": "{{feature_name}}-user-model",
      "title": "用户模型和认证数据结构",
      "description": "定义用户模型、角色和会话相关的数据结构",
      "steps": [
        "定义 User 模型（email, password hash, role, timestamps）",
        "定义 Session/Token 模型（如需要）",
        "定义 Role/Permission 模型（如需要 RBAC）",
        "生成数据库客户端代码",
        "运行类型检查验证（{{type_check_command}}）"
      ],
      "passes": false,
      "priority": "critical",
      "tags": ["database", "model", "auth"],
      "relatedSpecs": []
    },
    {
      "id": "{{feature_name}}-auth-api",
      "title": "认证 API 端点",
      "description": "实现登录、注册、登出等认证 API",
      "steps": [
        "创建 {{route_path}}/login/route.ts（登录 + 凭证验证）",
        "创建 {{route_path}}/register/route.ts（注册 + 输入验证）",
        "创建 {{route_path}}/logout/route.ts（登出 + 会话清除）",
        "创建 {{route_path}}/me/route.ts（获取当前用户信息）",
        "实现密码哈希和验证逻辑",
        "运行 lint 和 build 测试（{{lint_command}} + {{build_command}}）"
      ],
      "passes": false,
      "priority": "critical",
      "tags": ["api", "auth", "security"],
      "relatedSpecs": []
    },
    {
      "id": "{{feature_name}}-auth-middleware",
      "title": "认证中间件和权限检查",
      "description": "实现认证中间件、权限检查和路由保护",
      "steps": [
        "创建认证中间件（验证会话/Token）",
        "实现权限检查工具函数",
        "创建认证上下文/Provider（前端状态管理）",
        "实现受保护路由的重定向逻辑",
        "运行类型检查和 build 测试（{{type_check_command}} + {{build_command}}）"
      ],
      "passes": false,
      "priority": "high",
      "tags": ["middleware", "auth", "security"],
      "relatedSpecs": []
    },
    {
      "id": "{{feature_name}}-login-ui",
      "title": "登录/注册页面",
      "description": "创建登录和注册的前端页面",
      "steps": [
        "创建登录页面（表单 + 验证 + 错误提示）",
        "创建注册页面（表单 + 密码强度 + 确认密码）",
        "实现表单提交和 API 调用",
        "添加加载状态和成功/失败反馈",
        "使用 dev-browser 测试登录/注册流程",
        "运行 lint 和 build 测试（{{lint_command}} + {{build_command}}）"
      ],
      "passes": false,
      "priority": "high",
      "tags": ["ui", "auth", "page"],
      "relatedSpecs": []
    }
  ]
}
